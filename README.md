# deepemail

deepemail is a GNU GPL v3 open-source project which provides REST APIs to send instant emails for your applications.
Ideally, if you're working on a real world project, you should download all the code and run this as a separate email service for your applications. But, for small use-cases you can directly call APIs hosted on deepemail servers.
There are 2 main APIs catering to two different type of scenarios: 
(1) http://hostname:port/requestemail/trigger  (optimised to be vertical scalable) When performance is of utmost importance - you want to trigger more number of mails per minute and not wait for the result. The http response you'll get is only indicative that API has been hit and doesn't care if your request threw an exception or error during processing. Basically each email trigger request is allocated a separate thread from executor service. You can find the number of executor service threads have been kept at 20 in TriggerEmail class - which can be increased/decreased based on your needs. Furthermore, if your requirements are huge, you may consider horizontal scaling by having multiple instances of deepemail and having a load balancer to balance the load.
(2) http://hostname:port/requestemail/send When reliability has utmost importance - you want to be 100% sure that email has been sent successfully, then you can call this API. The http response you'll get from this REST API will guarentee that email has been sent successfully. Not to mention, there is a severe performance hit in this case - no new thread is created or allocated to this request and everything will be running in the main thread.

Before calling any of the APIs to trigger an email, you need to generate a key for your email password which you'll be sending with every request. Why? You don't want to send your actual email password with every JSON POST request - also, sending actual password will mean putting it somewhere in code which is very, very dangerous! 
You can call this API: http://hostname:port/requestemail/getKey with a JSON having username and password to get a new unique password for your username. Now, you can use this new password in all the JSONs which you'll send as a POST request to trigger/send an email. Sounds safe? Isn't it? But wait a minute! It is not safe unless you have your own secretKeyIngredient in TrippleDes class. This secretKeyIngredient in your code should not be known to anyone - otherwise, your unique private password is not-so-private afterall! So, please take care of this! 
Example JSON reuest to fetch unique key for username password: {"username":"youremail@gmail.com","password":"yourpassword123"}
Lets say, you got a response like this: krUvXXjApi9MVhUjznAsQw=. Now this krUvXXjApi9MVhUjznAsQw= is your new password for youremail@gmail.com.
Example JSON request to trigger an email in this case : {
        "sourceEmailId": "youremail@gmail.com", "password" : "krUvXXjApi9MVhUjznAsQw=", "targetEmailId":"10vtkars@gmail.com",
        "subject":"TEST EMAIL 5", "body" : "<div><h3 style=\"color:red\">Hello World!</h3><br/><p>How are you?</p><br/><h5>Regards,</h5><h4>Utkarsh Deep</h4></div>", "isHtml":"true"

}
Well, this is just a sample JSON and there can be multiple variations. For example: isHtml can be set to false if you just want to send a plain text email. Also, you can send SMTP config data for your email with every JSON request. If you don't send, it assumes all the defaults for @gmail.com - which can be seen in logs. config data can be sent as a separate JSON inside main JSON. configData will have properties like host, port, requireAuthentication and requireTls. 
